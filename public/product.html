<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>product name here.</title>
	<link rel="stylesheet" type="text/css" href="mflx.css">
</head>
<body>
	<div class="container p-2">
    	<div style="display: grid; align-items: center;">
      		<h1 class="outlined-text" style="grid-area: 1 / 1; z-index: 2; ">Sarawr Art Store</h1>
    	<div class="flx(column) center middle" style="grid-area: 1 / 1;">
      		<div class="carousel">
      			<div class="slides">
        			<div class="slide" style="background-image: url('https://picsum.photos/id/1015/600/300');"></div>
        			<div class="slide" style="background-image: url('https://picsum.photos/id/1016/600/300');"></div>
        			<div class="slide" style="background-image: url('https://picsum.photos/id/1018/600/300');"></div>
      			</div>
        		<button class="arrow left">&#10094;</button>
        		<button class="arrow right">&#10095;</button>
      		</div>
      
    	</div>
		</div>
	</div>
	<div class="product-container flx(wrap) space-evenly middle">
		
	</div>
	<script>
		async function fetchProduct() {
			const response = await fetch(`/api/product/${new URLSearchParams(window.location.search).get("id")}`);
			const product = await response.json();
			const productCard = document.querySelector('.product-container');
			console.log(productCard);
			productCard.innerHTML = '';

			productCard.innerHTML = `
			  <h5 class="card-title">${product.name}</h5>
			  <p class="card-text">Price: $${(product.price / 100).toFixed(2)}</p>
			  <button class="btn-primary" onclick="checkout(${product.id})">Buy Now</button>
			`;
			
		}

		// sliderCode
    const slides = document.querySelector('.slides');
    const slideCount = document.querySelectorAll('.slide').length;
    const prevBtn = document.querySelector('.arrow.left');
    const nextBtn = document.querySelector('.arrow.right');

    let currentIndex = 0;

    function updateSlide() {
      slides.style.transform = `translateX(-${currentIndex * 100}%)`;
    }
    //document.querySelector('')

    prevBtn.addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + slideCount) % slideCount;
      updateSlide();
    });

    nextBtn.addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % slideCount;
      updateSlide();
    });

     setInterval(() => {
    nextBtn.click();
      }, 3000);

     fetchProduct()
		
	</script>
</body>
</html>